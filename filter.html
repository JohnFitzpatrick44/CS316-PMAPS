<!DOCTYPE html>
<html><head>Filter<br></head>

<input type="checkbox" onclick="filter('Category')" name=category checked>Landmark<br>
<input type="checkbox" onclick="filter('Category')" name=category checked>Pro-Tip!<br>
<input type="checkbox" onclick="filter('Category')" name=category checked>Solos<br>
<input type="checkbox" onclick="filter('Category')" name=category checked>Safety<br>
<input type="checkbox" onclick="filter('Category')" name=category checked>VAM<br>
<input type="checkbox" onclick="filter('Category')" name=category checked>Waterfall<br>
<input type="checkbox" onclick="filter('Category')" name=category checked>Water<br>
<input type="checkbox" onclick="filter('Category')" name=category checked>Campsite<br>
<input type="checkbox" onclick="filter('Category')" name=category checked>Maps<br>

<?php
	try {
		include("/etc/php/my-pdo.php");
		$dbh = dbconnect();
	} catch (PDOException $e) {
		print "Error connecting to the database: " . $e->getMessage() . "<br/>";
		die();
	}
	$filter = $dbh->query('SELECT name,text,type,timestamp,longitude,lattitude FROM Comment,Person,Place, RelevantFor WHERE Comment.pid = Person.pid AND Comment.lid = Place.lid AND Comment.cid = RelevantFor.cid AND RelevantFor.trip=?');

?>


<script>
function filt() {

  var list = [];
  var filter = <?php echo json_encode($filter->fetchAll(PDO::FETCH_ASSOC)); ?>;
  filter.forEach(function() {
    if(document.getAttribute('type').onclick = function() {
      list.push("filter");
      var geowanted = new google.maps.Data.Point({lat: parseFloat(filter.longitude), lng: parseFloat(filter.lattitude)});		// Issue here: lat and lng are switched
      var propswanted = {name: filter.name, description: filter.text, category: filter.type, date: filter.timestamp};
      markerLayer.add({geometry: geowanted, properties: propswanted});)
  });
</script>
</html>
